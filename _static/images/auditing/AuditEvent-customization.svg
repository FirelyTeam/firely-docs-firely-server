<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="490px" preserveAspectRatio="none" style="width:990px;height:490px;background:#FFFFFF;" version="1.1" viewBox="0 0 990 490" width="990px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="240" x="374.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="230" x="379.25" y="27.9951">AuditEvent creation process</text><rect fill="#FFFFFF" height="332.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="155" y="104.7266"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="320" y="133.8594"/><rect fill="#FFFFFF" height="230.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="320" y="192.125"/><rect fill="#FFFFFF" height="172.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="484" y="236.3906"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="489" y="273.5234"/><rect fill="#FFFFFF" height="42" style="stroke:#181818;stroke-width:1.0;" width="10" x="648" y="352.7891"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="826" y="366.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="160" x2="160" y1="73.5938" y2="454.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="324.5" x2="324.5" y1="73.5938" y2="454.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="488.5" x2="488.5" y1="73.5938" y2="454.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="652.5" x2="652.5" y1="73.5938" y2="454.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="830.5" x2="830.5" y1="73.5938" y2="454.7891"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="268" x="26" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="254" x="33" y="62.292">AuditEventMiddleware (order 3170)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="268" x="26" y="453.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="254" x="33" y="473.7842">AuditEventMiddleware (order 3170)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="29" x="310.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="15" x="317.5" y="62.292">...</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="29" x="310.5" y="453.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="15" x="317.5" y="473.7842">...</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="279" x="349.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="265" x="356.5" y="62.292">AuditEventCustomizationMiddleware</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="279" x="349.5" y="453.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="265" x="356.5" y="473.7842">AuditEventCustomizationMiddleware</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="29" x="638.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="15" x="645.5" y="62.292">...</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="29" x="638.5" y="453.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="15" x="645.5" y="473.7842">...</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="307" x="677.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="684.5" y="62.292">CreateOperationMiddleware (order 4420)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="307" x="677.5" y="453.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="293" x="684.5" y="473.7842">CreateOperationMiddleware (order 4420)</text><rect fill="#FFFFFF" height="332.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="155" y="104.7266"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="320" y="133.8594"/><rect fill="#FFFFFF" height="230.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="320" y="192.125"/><rect fill="#FFFFFF" height="172.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="484" y="236.3906"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="489" y="273.5234"/><rect fill="#FFFFFF" height="42" style="stroke:#181818;stroke-width:1.0;" width="10" x="648" y="352.7891"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="826" y="366.7891"/><polygon fill="#181818" points="143,100.7266,153,104.7266,143,108.7266,147,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="0" x2="149" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="7" y="99.6606">original HTTP request</text><polygon fill="#181818" points="308,129.8594,318,133.8594,308,137.8594,312,133.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="165" x2="314" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="172" y="128.7935">original HTTP request</text><polygon fill="#181818" points="176,143.8594,166,147.8594,176,151.8594,172,147.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="170" x2="324" y1="147.8594" y2="147.8594"/><polygon fill="#181818" points="308,188.125,318,192.125,308,196.125,312,192.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="165" x2="314" y1="192.125" y2="192.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="172" y="171.9263">AuditEvent creation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="172" y="187.0591">request context</text><polygon fill="#181818" points="472,232.3906,482,236.3906,472,240.3906,476,236.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="330" x2="478" y1="236.3906" y2="236.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="337" y="216.1919">AuditEvent creation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="337" y="231.3247">request context</text><line style="stroke:#181818;stroke-width:1.0;" x1="499" x2="541" y1="265.5234" y2="265.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="541" x2="541" y1="265.5234" y2="278.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="541" y1="278.5234" y2="278.5234"/><polygon fill="#181818" points="510,274.5234,500,278.5234,510,282.5234,506,278.5234" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="506" y="260.4575">Customize payload</text><polygon fill="#181818" points="636,348.7891,646,352.7891,636,356.7891,640,352.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="642" y1="352.7891" y2="352.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="501" y="332.5903">AuditEvent creation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="501" y="347.7231">request context</text><polygon fill="#181818" points="814,362.7891,824,366.7891,814,370.7891,818,366.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="658" x2="820" y1="366.7891" y2="366.7891"/><polygon fill="#181818" points="669,376.7891,659,380.7891,669,384.7891,665,380.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="663" x2="830" y1="380.7891" y2="380.7891"/><polygon fill="#181818" points="505,390.7891,495,394.7891,505,398.7891,501,394.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="499" x2="652" y1="394.7891" y2="394.7891"/><polygon fill="#181818" points="341,404.7891,331,408.7891,341,412.7891,337,408.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="335" x2="488" y1="408.7891" y2="408.7891"/><polygon fill="#181818" points="176,418.7891,166,422.7891,176,426.7891,172,422.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="170" x2="324" y1="422.7891" y2="422.7891"/><polygon fill="#181818" points="11,432.7891,1,436.7891,11,440.7891,7,436.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="159" y1="436.7891" y2="436.7891"/><!--MD5=[2739cf715301e93c75cba571856b6280]
@startuml
title "AuditEvent creation process"

participant "AuditEventMiddleware (order 3170)" as aem
participant "..." as hOther
participant "AuditEventCustomizationMiddleware" as aecm
participant "..." as hOther2
participant "CreateOperationMiddleware (order 4420)" as hCreate

-> aem: original HTTP request
activate aem
aem -> hOther: original HTTP request
activate hOther
hOther - -> aem
deactivate hOther

aem -> hOther: AuditEvent creation \nrequest context
activate hOther
hOther -> aecm: AuditEvent creation \nrequest context
activate aecm
aecm -> aecm: Customize payload
activate aecm
deactivate aecm
aecm -> hOther2: AuditEvent creation \nrequest context
activate hOther2
hOther2 -> hCreate
activate hCreate
hCreate - -> hOther2
deactivate hCreate
hOther2 - -> aecm
deactivate hOther2
aecm - -> hOther
deactivate aecm
hOther - -> aem
deactivate hOther
<- - aem
deactivate aem
@enduml

PlantUML version 1.2022.13beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>